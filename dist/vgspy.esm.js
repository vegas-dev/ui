// @vegas-dev/apps/VGSpy v1.0.0
class t{constructor(t,e,l){this.settings=Object.assign({speed:500,offset:0,hash:!0},e),t&&this.init(t,l)}init(t,e){let l=this,s=t.querySelectorAll("[data-target]").length?t.querySelectorAll("[data-target]"):t.querySelectorAll("a");if(e&&"afterInit"in e&&"function"==typeof e.afterInit&&e.afterInit(l),s.length)for(let t of s)t.onclick=function(){let t=this,e=l.attributes(t);if(e.target){let a=document.getElementById(e.target);if(!a)return;for(let t=1;t<=s.length;t++)s[t-1].classList.remove("active");t.classList.add("active");let r=a.offsetTop+e.offset;l.scroll(null,r)}return!1},l.spy(t,s)}scroll(t=null,e=null,l=!1){window.scrollTo(t,e),l&&this.clear()}spy(t,e){let l=this;function s(t,s){let a=l.attributes(t),r=null;if(a.target&&document.getElementById(a.target)&&(r=document.getElementById(a.target)),r){let l=r.offsetTop+a.offset;if(console.log(s,l),s>=l){for(let t=1;t<=e.length;t++)e[t-1].classList.remove("active");t.classList.add("active")}}}s(t,window.scrollY),window.onscroll=function(){s(t,this.pageYOffset)}}attributes(t){let e=t.getAttribute("href")||t.dataset.target;return"undefined"!==e&&-1!==e.indexOf("#")?e=e.replace(/(^.+)#/gm,""):"undefined"!==e&&-1===e.indexOf("#")&&(e=""),{target:e,speed:t.dataset.speed?parseInt(t.dataset.speed):this.settings.speed,offset:t.dataset.offset?parseInt(t.dataset.offset):this.settings.offset}}clear(){let t=document.querySelectorAll("[data-vgspy]");if(t.length)for(let e of t){let t=e.querySelectorAll("[data-target]").length?e.querySelectorAll("[data-target]"):e.querySelectorAll("a");for(let e=1;e<=t.length;e++)t[e-1].classList.remove("active")}}}let e=document.querySelectorAll("[data-vgspy]");if(e.length)for(let l of e){new t(l,{hash:!(l.dataset.hash&&"false"===l.dataset.hash)})}export{t as VGSpy};
